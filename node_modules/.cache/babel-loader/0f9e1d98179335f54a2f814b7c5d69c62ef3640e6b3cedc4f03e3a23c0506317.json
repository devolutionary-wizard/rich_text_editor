{"ast":null,"code":"var _jsxFileName = \"/Users/denji/rich_text_editor/front-end/src/App.js\",\n  _s = $RefreshSig$();\nimport { useMemo, useRef } from \"react\";\nimport axios from \"axios\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const editorRef = useRef(null);\n  const imageHandler = a => {\n    const input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"file\");\n    input.setAttribute(\"accept\", \"image/*\");\n    input.click();\n    input.onchange = () => {\n      const file = input.files[0];\n\n      // file type is only image.\n      if (/^image\\//.test(file.type)) {\n        saveToServer(file);\n      } else {\n        console.warn(\"You could only upload images.\");\n      }\n    };\n  };\n  function saveToServer(file) {\n    const fd = new FormData();\n    fd.append(\"upload\", file);\n    axios.post(\"https://api.Cloudinary.com/v1_1/kakbw8zu\", {\n      method: \"POST\",\n      body: fd\n    }).then(res => res.json()).then(res => {\n      console.log(res);\n      const url = res.data[\"secure_url\"];\n      insertToEditor(url);\n    }).catch(err => console.log(err));\n  }\n  function insertToEditor(url) {\n    editorRef.current.getEditor().insertEmbed(null, \"image\", url);\n  }\n  const modules = useMemo(() => ({\n    toolbar: {\n      container: [[\"image\"]],\n      handlers: {\n        image: imageHandler\n      }\n    }\n  }));\n  return /*#__PURE__*/_jsxDEV(ReactQuill, {\n    modules: modules,\n    forwardedRef: editorRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 10\n  }, this);\n}\n_s(App, \"/6B/1SsFeEbz6FniV8vCtNxL6Us=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useMemo","useRef","axios","ReactQuill","App","editorRef","imageHandler","a","input","document","createElement","setAttribute","click","onchange","file","files","test","type","saveToServer","console","warn","fd","FormData","append","post","method","body","then","res","json","log","url","data","insertToEditor","catch","err","current","getEditor","insertEmbed","modules","toolbar","container","handlers","image"],"sources":["/Users/denji/rich_text_editor/front-end/src/App.js"],"sourcesContent":["import { useMemo, useRef } from \"react\";\nimport axios from \"axios\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\n\nfunction App() {\n  const editorRef = useRef(null);\n  const imageHandler = (a) => {\n    const input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"file\");\n    input.setAttribute(\"accept\", \"image/*\");\n    input.click();\n\n    input.onchange = () => {\n      const file = input.files[0];\n\n      // file type is only image.\n      if (/^image\\//.test(file.type)) {\n        saveToServer(file);\n      } else {\n        console.warn(\"You could only upload images.\");\n      }\n    };\n  };\n\n  function saveToServer(file) {\n    const fd = new FormData();\n    fd.append(\"upload\", file);\n\n    axios\n      .post(\"https://api.Cloudinary.com/v1_1/kakbw8zu\", {\n        method: \"POST\",\n        body: fd,\n      })\n      .then((res) => res.json())\n      .then((res) => {\n        console.log(res);\n        const url = res.data[\"secure_url\"];\n        insertToEditor(url);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function insertToEditor(url) {\n    editorRef.current.getEditor().insertEmbed(null, \"image\", url);\n  }\n\n  const modules = useMemo(() => ({\n    toolbar: {\n      container: [[\"image\"]],\n\n      handlers: {\n        image: imageHandler,\n      },\n    },\n  }));\n  return <ReactQuill modules={modules} forwardedRef={editorRef} />;\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,aAAa;AACpC,OAAO,iCAAiC;AAAC;AAEzC,SAASC,GAAG,GAAG;EAAA;EACb,MAAMC,SAAS,GAAGJ,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMK,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC7CF,KAAK,CAACG,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;IAClCH,KAAK,CAACG,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC;IACvCH,KAAK,CAACI,KAAK,EAAE;IAEbJ,KAAK,CAACK,QAAQ,GAAG,MAAM;MACrB,MAAMC,IAAI,GAAGN,KAAK,CAACO,KAAK,CAAC,CAAC,CAAC;;MAE3B;MACA,IAAI,UAAU,CAACC,IAAI,CAACF,IAAI,CAACG,IAAI,CAAC,EAAE;QAC9BC,YAAY,CAACJ,IAAI,CAAC;MACpB,CAAC,MAAM;QACLK,OAAO,CAACC,IAAI,CAAC,+BAA+B,CAAC;MAC/C;IACF,CAAC;EACH,CAAC;EAED,SAASF,YAAY,CAACJ,IAAI,EAAE;IAC1B,MAAMO,EAAE,GAAG,IAAIC,QAAQ,EAAE;IACzBD,EAAE,CAACE,MAAM,CAAC,QAAQ,EAAET,IAAI,CAAC;IAEzBZ,KAAK,CACFsB,IAAI,CAAC,0CAA0C,EAAE;MAChDC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEL;IACR,CAAC,CAAC,CACDM,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAK;MACbT,OAAO,CAACW,GAAG,CAACF,GAAG,CAAC;MAChB,MAAMG,GAAG,GAAGH,GAAG,CAACI,IAAI,CAAC,YAAY,CAAC;MAClCC,cAAc,CAACF,GAAG,CAAC;IACrB,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,IAAKhB,OAAO,CAACW,GAAG,CAACK,GAAG,CAAC,CAAC;EACrC;EAEA,SAASF,cAAc,CAACF,GAAG,EAAE;IAC3B1B,SAAS,CAAC+B,OAAO,CAACC,SAAS,EAAE,CAACC,WAAW,CAAC,IAAI,EAAE,OAAO,EAAEP,GAAG,CAAC;EAC/D;EAEA,MAAMQ,OAAO,GAAGvC,OAAO,CAAC,OAAO;IAC7BwC,OAAO,EAAE;MACPC,SAAS,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;MAEtBC,QAAQ,EAAE;QACRC,KAAK,EAAErC;MACT;IACF;EACF,CAAC,CAAC,CAAC;EACH,oBAAO,QAAC,UAAU;IAAC,OAAO,EAAEiC,OAAQ;IAAC,YAAY,EAAElC;EAAU;IAAA;IAAA;IAAA;EAAA,QAAG;AAClE;AAAC,GApDQD,GAAG;AAAA,KAAHA,GAAG;AAsDZ,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}